# 5. 행동 패턴

## Table of Contents

  1. [책임 연쇄](#책임-연쇄) 
  1. [명령](#명령) 
  1. [해석자](#해석자) 
  1. [반복자](#반복자) 
  1. [중재자](#중재자) 
  1. [메멘토](#메멘토) 


## 책임 연쇄 



### 구현 

```javascript
var Westeros;
(function (Westeros) {
    (function (JudicialSystem) {
        var Complaint = (function () {
            function Complaint() {
                this.ComplainingParty = "";
                this.ComplaintAbout = "";
                this.Complaint = "";
            }
            return Complaint;
        })();
        JudicialSystem.Complaint = Complaint;

        var ClerkOfTheCourt = (function () {
            function ClerkOfTheCourt() {
            }
            ClerkOfTheCourt.prototype.IsAbleToResolveComplaint = function (complaint) {
                //decide if this is a complaint which can be solved by the clerk
                return false;
            };

            ClerkOfTheCourt.prototype.ListenToComplaint = function (complaint) {
                //perform some operation
                //return solution to the complaint
                return "";
            };
            return ClerkOfTheCourt;
        })();
        JudicialSystem.ClerkOfTheCourt = ClerkOfTheCourt;

        var King = (function () {
            function King() {
            }
            King.prototype.IsAbleToResolveComplaint = function (complaint) {
                return true;
            };

            King.prototype.ListenToComplaint = function (complaint) {
                //perform some operation
                //return solution to the complaint
                return "";
            };
            return King;
        })();
        JudicialSystem.King = King;

        var ComplaintResolver = (function () {
            function ComplaintResolver() {
                this.complaintListeners = new Array();
                this.complaintListeners.push(new ClerkOfTheCourt());
                this.complaintListeners.push(new King());
            }
            ComplaintResolver.prototype.ResolveComplaint = function (complaint) {
                for (var i = 0; i < this.complaintListeners.length; i++) {
                    if (this.complaintListeners[i].IsAbleToResolveComplaint(complaint)) {
                        return this.complaintListeners[i].ListenToComplaint(complaint);
                    }
                }
            };
            return ComplaintResolver;
        })();
        JudicialSystem.ComplaintResolver = ComplaintResolver;
    })(Westeros.JudicialSystem || (Westeros.JudicialSystem = {}));
    var JudicialSystem = Westeros.JudicialSystem;
})(Westeros || (Westeros = {}));
```

**[Back to top](#table-of-contents)**

## 명령 



### 명령 메시지 



### 수신자 



### 호출자 

```javascript
var Westeros;
(function (Westeros) {
    (function (Communication) {
        var BringTroopsCommand = (function () {
            function BringTroopsCommand(location, numberOfTroops, when) {
                this._location = location;
                this._numberOfTroops = numberOfTroops;
                this._when = when;
            }
            BringTroopsCommand.prototype.Execute = function () {
                var receiver = new LordInstructions();
                receiver.BringTroops(this._location, this._numberOfTroops, this._when);
            };
            return BringTroopsCommand;
        })();
        Communication.BringTroopsCommand = BringTroopsCommand;

        var LordInstructions = (function () {
            function LordInstructions() {
            }
            LordInstructions.prototype.BringTroops = function (location, numberOfTroops, when) {
                console.log("You have been instructed to bring " + numberOfTroops + " troops to " + location + " by " + when);
            };
            return LordInstructions;
        })();
        Communication.LordInstructions = LordInstructions;

        var simpleCommand = new Array();
        simpleCommand.push(new LordInstructions().BringTroops);
        simpleCommand.push("King's Landing");
        simpleCommand.push(500);
        simpleCommand.push(new Date());

        simpleCommand[0](simpleCommand[1], simpleCommand[2], simpleCommand[3], simpleCommand[4], simpleCommand[5], simpleCommand[6]);
    })(Westeros.Communication || (Westeros.Communication = {}));
    var Communication = Westeros.Communication;
})(Westeros || (Westeros = {}));
```

**[Back to top](#table-of-contents)**

## 해석자 



### 구현 

```javascript
var Westeros;
(function (Westeros) {
    (function (History) {
        var Battle = (function () {
            function Battle(battleGround, agressor, defender, victor) {
                this.battleGround = battleGround;
                this.agressor = agressor;
                this.defender = defender;
                this.victor = victor;
            }
            return Battle;
        })();
        History.Battle = Battle;

        var Parser = (function () {
            function Parser(battleText) {
                this.battleText = battleText;
                this.currentIndex = 0;
                this.battleList = battleText.split("\n");
            }
            Parser.prototype.nextBattle = function () {
                if (!this.battleList[0])
                    return null;
                var segments = this.battleList[0].match(/\((.+?)\s?->\s?(.+?)\s?<-\s?(.+?)\s?->\s?(.+)/);
                return new Battle(segments[2], segments[1], segments[3], segments[4]);
            };
            return Parser;
        })();
        History.Parser = Parser;
    })(Westeros.History || (Westeros.History = {}));
    var History = Westeros.History;
})(Westeros || (Westeros = {}));
```

**[Back to top](#table-of-contents)**

### 예제 



## 반복자 



### ECMAScript 6 반복자 



### 구현 

```javascript
var Westeros;
(function (Westeros) {
    (function (Succession) {
        var KingSuccession = (function () {
            function KingSuccession(inLineForThrone) {
                this.inLineForThrone = inLineForThrone;
                this.pointer = 0;
            }
            KingSuccession.prototype.next = function () {
                return this.inLineForThrone[this.pointer++];
            };
            return KingSuccession;
        })();
        Succession.KingSuccession = KingSuccession;

        var FibonacciIterator = (function () {
            function FibonacciIterator() {
                this.previous = 1;
                this.beforePrevious = 1;
            }
            FibonacciIterator.prototype.next = function () {
                var current = this.previous + this.beforePrevious;
                this.beforePrevious = this.previous;
                this.previous = current;
                return current;
            };
            return FibonacciIterator;
        })();
        Succession.FibonacciIterator = FibonacciIterator;
    })(Westeros.Succession || (Westeros.Succession = {}));
    var Succession = Westeros.Succession;
})(Westeros || (Westeros = {}));
```

**[Back to top](#table-of-contents)**

## 중재자 



### 구현 

```javascript
var Westeros;
(function (Westeros) {
    (function (Alliances) {
        var HouseStark = (function () {
            function HouseStark() {
                this.karstark = new Karstark(this);
                this.bolton = new Bolton(this);
                this.frey = new Frey(this);
                this.umber = new Umber(this);
            }
            HouseStark.prototype.routeMessage = function (message) {
            };
            return HouseStark;
        })();
        Alliances.HouseStark = HouseStark;

        var Karstark = (function () {
            function Karstark(greatLord) {
                this.greatLord = greatLord;
            }
            Karstark.prototype.receiveMessage = function (message) {
            };
            Karstark.prototype.sendMessage = function (message) {
                this.greatLord.routeMessage(message);
            };
            return Karstark;
        })();
        Alliances.Karstark = Karstark;

        var Bolton = (function () {
            function Bolton(greatLord) {
                this.greatLord = greatLord;
            }
            Bolton.prototype.receiveMessage = function (message) {
            };
            Bolton.prototype.sendMessage = function (message) {
                this.greatLord.routeMessage(message);
            };
            return Bolton;
        })();
        Alliances.Bolton = Bolton;

        var Frey = (function () {
            function Frey(greatLord) {
                this.greatLord = greatLord;
            }
            Frey.prototype.receiveMessage = function (message) {
            };
            Frey.prototype.sendMessage = function (message) {
                this.greatLord.routeMessage(message);
            };
            return Frey;
        })();
        Alliances.Frey = Frey;

        var Umber = (function () {
            function Umber(greatLord) {
                this.greatLord = greatLord;
            }
            Umber.prototype.receiveMessage = function (message) {
            };
            Umber.prototype.sendMessage = function (message) {
                this.greatLord.routeMessage(message);
            };
            return Umber;
        })();
        Alliances.Umber = Umber;
    })(Westeros.Alliances || (Westeros.Alliances = {}));
    var Alliances = Westeros.Alliances;
})(Westeros || (Westeros = {}));
```

**[Back to top](#table-of-contents)**

## 메멘토 



### 구현 

```javascript
var Westeros;
(function (Westeros) {
    (function (Foretelling) {
        var SquareCommand = (function () {
            function SquareCommand(numberToSquare) {
                this.numberToSquare = numberToSquare;
            }
            SquareCommand.prototype.Execute = function () {
                this.numberToSquare *= this.numberToSquare;
            };
            return SquareCommand;
        })();
        Foretelling.SquareCommand = SquareCommand;

        var WorldState = (function () {
            function WorldState(numberOfKings, currentKingInKingsLanding, season) {
                this.numberOfKings = numberOfKings;
                this.currentKingInKingsLanding = currentKingInKingsLanding;
                this.season = season;
            }
            return WorldState;
        })();
        Foretelling.WorldState = WorldState;

        var Soothsayer = (function () {
            function Soothsayer() {
                this.startingPoints = [];
                this.currentState = new WorldStateProvider();
            }
            Soothsayer.prototype.setInitialConditions = function (numberOfKings, currentKingInKingsLanding, season) {
                this.currentState.numberOfKings = numberOfKings;
                this.currentState.currentKingInKingsLanding = currentKingInKingsLanding;
                this.currentState.season = season;
            };
            Soothsayer.prototype.alterNumberOfKingsAndForetell = function (numberOfKings) {
                this.startingPoints.push(this.currentState.saveMemento());
                this.currentState.numberOfKings = numberOfKings;
            };
            Soothsayer.prototype.alterSeasonAndForetell = function (season) {
                this.startingPoints.push(this.currentState.saveMemento());
                this.currentState.season = season;
            };
            Soothsayer.prototype.alterCurrentKingInKingsLandingAndForetell = function (currentKingInKingsLanding) {
                this.startingPoints.push(this.currentState.saveMemento());
                this.currentState.currentKingInKingsLanding = currentKingInKingsLanding;
            };
            Soothsayer.prototype.tryADifferentChange = function () {
                this.currentState.restoreMemento(this.startingPoints.pop());
            };
            return Soothsayer;
        })();
        Foretelling.Soothsayer = Soothsayer;

        var WorldStateProvider = (function () {
            function WorldStateProvider() {
            }
            WorldStateProvider.prototype.saveMemento = function () {
                return new WorldState(this.numberOfKings, this.currentKingInKingsLanding, this.season);
            };
            WorldStateProvider.prototype.restoreMemento = function (memento) {
                this.numberOfKings = memento.numberOfKings;
                this.currentKingInKingsLanding = memento.currentKingInKingsLanding;
                this.season = memento.season;
            };
            return WorldStateProvider;
        })();
        Foretelling.WorldStateProvider = WorldStateProvider;
    })(Westeros.Foretelling || (Westeros.Foretelling = {}));
    var Foretelling = Westeros.Foretelling;
})(Westeros || (Westeros = {}));
```

**[Back to top](#table-of-contents)**


## Ref.

* [pattern2018/05_행동_패턴/](https://github.com/js-jsm/pattern2018/tree/master/05_%ED%96%89%EB%8F%99_%ED%8C%A8%ED%84%B4)
* [http://loredanacirstea.github.io/es6-design-patterns/](http://loredanacirstea.github.io/es6-design-patterns/#behavioral-patterns)
